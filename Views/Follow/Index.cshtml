@model IPagedList<Netflex.Models.Follow.FollowViewModel>
@using X.PagedList.Mvc.Core
@{
    ViewData["Title"] = "Phim yêu thích";
    Layout = "_Layout";
}

<div class="container list-items-blogs ">
    <div class="d-flex justify-content-between align-items-center my-3">
        <div class="d-flex align-items-center">
            <div class="vertical-line"></div>
            <p class="ms-2 mb-0 text-md text-white fw-bold">Yêu thích</p>
        </div>
    </div>
    @foreach (var item in Model)
    {
        if (item.FollowedFilms != null)
        {
            var film = item.FollowedFilms;
            <div class="row align-items-center home-blog-post">
                <div class="col-md-2 text-center position-relative">
                    <img src="@film.Poster" class="img-6x9 rounded" alt="@film.Title">
                    <div class="genre-overlay" style="background-color: #28a745; ">
                        <p>Phim lẻ</p>
                    </div>
                </div>

                <div class="col-md-9 text-smm ">
                    <a href="@Url.Action("Detail", "Film", new { id = film.Id })">
                        <p class="text-base text-white-70 mb-1">
                            @(film.Title.Length > 100 ? film.Title.Substring(0, 100) + "..." : film.Title)
                        </p>
                    </a>
                    <p>@film.ProductionYear</p>
                    <p>@(string.IsNullOrEmpty(film.About) ? "" : (film.About.Length > 100 ? film.About.Substring(0, 100) + "..."
                             : film.About))</p>
                </div>
                <div class="col-md-1 text-smm">
                    <i class="fa-solid fa-ellipsis fa-2xl"></i>
                </div>
            </div>
        }
        else if (item.FollowedSeries != null)
        {
            var serie = item.FollowedSeries;
            <div class="row align-items-center home-blog-post">
                <div class="col-md-2 text-center position-relative">
                    <img src="@serie.Poster" class="img-6x9 rounded" alt="@serie.Title">
                    <div class="genre-overlay" style="background-color: #a72828; ">
                        <p>Phim bộ</p>
                    </div>
                </div>

                <div class="col-md-10 text-smm ">
                    <a href="@Url.Action("Detail", "Serie", new { id = serie.Id })">
                        <p class="text-base text-white-70 mb-1">
                            @(serie.Title.Length > 100 ? serie.Title.Substring(0, 100) + "..." : serie.Title)
                        </p>
                    </a>
                    <p>@serie.ProductionYear</p>
                    <p>@(string.IsNullOrEmpty(serie.About) ? "" : (serie.About.Length > 100 ? serie.About.Substring(0, 100) +
                             "..." : serie.About))</p>

                </div>
            </div>
        }
    }
    @if (Model.PageCount > 1)
    {
        <div class="row">
            <nav class="text-sm">
                <ul class="pagination d-flex gap-2">
                    <li class="page-item @(Model.PageNumber == 1 ? "disabled" : "")">
                        <a class="page-link" href="@Url.Action("index", new { page = Model.PageNumber - 1 })">‹</a>
                    </li>

                    @for (int i = 1; i <= Model.PageCount; i++)
                    {
                        if (Model.PageCount > 5 && (i > 2 && i < Model.PageNumber - 1 || i < Model.PageCount - 1 && i >
                        Model.PageNumber + 1))
                        {
                            if (i == 3 || i == Model.PageCount - 2)
                            {
                                <li class="page-item disabled"><span class="page-link">...</span></li>
                            }
                            continue;
                        }
                        <li class="page-item @(i == Model.PageNumber ? "active" : "")">
                            <a class="page-link" href="@Url.Action("index", new { page = i })">@i</a>
                        </li>
                    }

                    <li class="page-item @(Model.PageNumber == Model.PageCount ? "disabled" : "")">
                        <a class="page-link" href="@Url.Action("index", new { page = Model.PageNumber + 1 })">›</a>
                    </li>
                </ul>
            </nav>
        </div>
    }

</div>
